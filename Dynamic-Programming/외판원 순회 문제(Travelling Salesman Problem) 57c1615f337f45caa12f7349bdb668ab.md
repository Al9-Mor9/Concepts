# μ™Ένμ› μν λ¬Έμ (Travelling Salesman Problem)

![Untitled](%E1%84%8B%E1%85%AC%E1%84%91%E1%85%A1%E1%86%AB%E1%84%8B%E1%85%AF%E1%86%AB%20%E1%84%89%E1%85%AE%E1%86%AB%E1%84%92%E1%85%AC%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(Travelling%20Salesman%20Problem)%2057c1615f337f45caa12f7349bdb668ab/Untitled.png)

### π’µ μ™Ένμ› μν λ¬Έμ λ€?

μ™Ένμ› μν λ¬Έμ λ” **ν• μ •μ μ—μ„ μ‹μ‘ν•΄μ„ λ‹¤λ¥Έ λ¨λ“  μ •μ μ„ ν• λ²μ”©λ§ λ°©λ¬Έν•΄μ„ μ‹μ‘ μ •μ μΌλ΅ λμ•„μ¤λ ¤ ν•  λ• κ°€λ¥ν• μµμ† λΉ„μ© λ° λ°©λ¬Έ μμ„**λ¥Ό μ°Ύλ” λ¬Έμ μ΄λ‹¤.

### π—’οΈNOTE

μ™Ένμ› μν λ¬Έμ μ—μ„λ” μ‹μ‘μ μ΄ μ£Όμ–΄μ§ μλ„, κ·Έλ ‡μ§€ μ•μ„ μλ„ μμ§€λ§ μ–΄λ κ²½μ°λ“  λ¬Έμ κ°€ μ—†λ‹¤. μµλ‹¨ μν κ²½λ΅κ°€ μ΅΄μ¬ν•λ‹¤λ©΄ μ΄λ” **μ‚¬μ΄ν΄**μ„ μ΄λ£° κ²ƒμ΄κ³ , λ”°λΌμ„ μ–΄λ–¤ μ •μ μΌλ΅λ¶€ν„° μ‹μ‘ν•λ“  μκΈ° μμ‹ μΌλ΅ λμ•„μ¤κΈ° μ„ν• **μµμ† λΉ„μ©μ€ λ™μΌ**ν•  κ²ƒμ΄κΈ° λ•λ¬Έμ΄λ‹¤. μ–΄λ–¤ μ •μ μ΄λ“  μμ‹ μΌλ΅ λμ•„μ¤λ” κ²½λ΅ λν• λ™μΌν• μ‚¬μ΄ν΄ μ•μ— μλ‹¤. 

### βοΈ ν’€μ΄(1) μ™„μ „ νƒμƒ‰ [[μ™Ένμ› μν 2](https://www.acmicpc.net/problem/10971)]

κ°€μ¥ λ¨Όμ € μƒκ°ν•΄ λ³Ό μ μλ” ν’€μ΄λ²•μ€ κ°€λ¥ν• λ°©λ¬Έ μμ„λ¥Ό κ³ λ ¤ν•΄ λ¨λ‘ ν™•μΈν•΄λ³΄λ” κ²ƒμ΄λ‹¤.

Nκ°μ μ •μ κ³Ό κ°„μ„ μ μ •λ³΄κ°€ μ£Όμ–΄μ΅λ‹¤κ³  ν•΄λ³΄μ. μ΄ Nκ°μ μ •μ μ— λ€ν•΄ κ°€λ¥ν• λ°©λ¬Έ μμ„λ” λ‹Ήμ—°ν N!μ΄ λ  κ²ƒμ΄λ‹¤. ν•μ§€λ§ μ•μ„ λ§ν• κ²ƒκ³Ό κ°™μ΄ μ–΄λ–¤ μ •μ μΌλ΅λ¶€ν„° μ‹μ‘ν•λ“  μµλ‹¨ μν κ²½λ΅λ” ν•­μƒ λ™μΌν•  κ²ƒμ΄λ‹¤. λ”°λΌμ„ μ‹μ‘ μ •μ μ€ μ„μλ΅ μ§€μ •ν•΄μ¤λ„ λκ³ , μ°λ¦¬κ°€ νƒμƒ‰ν•΄μ•Ό ν•  κ²ƒλ“¤μ€ λ‚λ¨Έμ§€ N-1κ° μ •μ μ μμ„μ΄λ‹¤. μ¦‰ μ™Ένμ› μν λ¬Έμ λ” (N-1)!μ μ‹κ°„ λ³µμ΅λ„ λ‚΄μ— ν’€ μ μλ‹¤.

![Untitled](%E1%84%8B%E1%85%AC%E1%84%91%E1%85%A1%E1%86%AB%E1%84%8B%E1%85%AF%E1%86%AB%20%E1%84%89%E1%85%AE%E1%86%AB%E1%84%92%E1%85%AC%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(Travelling%20Salesman%20Problem)%2057c1615f337f45caa12f7349bdb668ab/Untitled%201.png)

0~4λ² μ •μ λ“¤μ΄ μκ³ , κ·Έ κ°„μ„  μ •λ³΄λ“¤ λν• μ£Όμ–΄μ΅λ‹¤κ³  ν•μ. μ΄λ• 0λ² μ •μ μ„ μ„μλ΅ μ‹μ‘ μ •μ μΌλ΅ μ§€μ •ν•λ‹¤λ©΄, λ‚¨μ€ μΌμ€ λ‚λ¨Έμ§€ μ •μ λ“¤λ΅ μμ—΄μ„ λ§λ“¤κ³  μ£Όμ–΄μ§„ κ°„μ„  0β†’1, 1β†’2, 2β†’3, 3β†’4, 4β†’0λ“¤μ κΈΈμ΄λ¥Ό ν™•μΈν•λ” κ²ƒ λΏμ΄λ‹¤.

 

![Untitled](%E1%84%8B%E1%85%AC%E1%84%91%E1%85%A1%E1%86%AB%E1%84%8B%E1%85%AF%E1%86%AB%20%E1%84%89%E1%85%AE%E1%86%AB%E1%84%92%E1%85%AC%20%E1%84%86%E1%85%AE%E1%86%AB%E1%84%8C%E1%85%A6(Travelling%20Salesman%20Problem)%2057c1615f337f45caa12f7349bdb668ab/Untitled%202.png)

μ΄λ¥Ό λ§μ§€λ§‰ μμ—΄κΉμ§€ λ°λ³µν•λ‹¤λ©΄ κ°€λ¥ν• λ¨λ“  κ²½μ°λ“¤μ„ κ³ λ ¤ν• κ²ƒμ΄λ―€λ΅ λ‹µμ„ μ°Ύμ„ μ μλ‹¤.

λ¬Έμ λ” 11!(=39916800) μ •λ„κΉμ§€λ” μ™„μ „ νƒμƒ‰μΌλ΅ ν’€μ–΄λ³Ό λ§ν•μ§€λ§, 12!(=479001600)λ¶€ν„°λ” μ™„μ „ νƒμƒ‰μ„ μ μ©ν•  μ μ—†λ‹¤λ” κ²ƒμ΄λ‹¤.

---

### βοΈ ν’€μ΄(2) DP [[μ™Ένμ› μν](https://www.acmicpc.net/problem/2098)]

μ™„μ „ νƒμƒ‰μΌλ΅ ν’€ μ μλ” κ²ƒλ³΄λ‹¤ μΆ€ λ” ν° κ²½μ°μ—λ” DPλ¥Ό μ΄μ©ν•΄ ν’€ μ μλ‹¤. κΈ°λ³Έμ μΈ μ•„μ΄λ””μ–΄λ” DFSλ΅, ν„μ¬ λ°©λ¬Έ μ¤‘μΈ μ •μ , μ΄λ•κΉμ§€ λ°©λ¬Έν• μ •μ  λ° μµμ† λΉ„μ©μ„ μ•κ³  μμ„ λ•, λ°©λ¬Έ κ°€λ¥ν• λ―Έλ°©λ¬Έ μ •μ λ“¤μ„ λ°©λ¬Έν•΄λ³΄λ” κ²ƒμ΄λ‹¤. μ—¬κΈ°μ„ μ •λ³΄λ“¤μ€ λΉ„νΈλ§μ¤ν‚Ήμ„ μ΄μ©ν•΄ dp λ°°μ—΄μ— λ‹¤μκ³Ό κ°™μ΄ μ €μ¥λλ‹¤.

                 **dp[λ°©λ¬Έ μ¤‘μΈ μ •μ ][ν„μ¬κΉμ§€ λ°©λ¬Έν• μ •μ λ“¤] = μµμ† λΉ„μ©**

- μ™ **λΉ„νΈ λ§μ¤ν‚Ή**μ„ μ΄μ©ν•λ”μ§€?
    
    λΉ„νΈ μ—°μ‚°μ€ λ‹¤μμ μ΄μ μ„ κ°€μ§„λ‹¤.
    
    - 1) λΉ λ¥Έ μ†λ„
    - 2) μ μ€ λ©”λ¨λ¦¬
    - 3) **λ©‹**

* λ§μ•½ λΉ„νΈλ§μ¤ν‚Ήμ„ μ‚¬μ©ν•μ§€ μ•κ³  μ„μ λ°©λ¬Έ λ°°μ—΄μ„ λ§λ“ λ‹¤λ©΄ λ‹¤μκ³Ό κ°™μ΄ λ§λ“¤ μλ„ μμ„ κ²ƒ κ°™λ‹¤.

**dp[16][2][2][2][2]β€¦[2][2][2][2]**

νΉμ€ key-value κ°’μΌλ΅??

μμ„Έν• κ±΄ μ½”λ“λ¥Ό ν†µν•΄μ„ 

```cpp
//Nμ€ μ •μ μ κ°μ, W[a][b]λ” a->bμ κ°„μ„ μ΄λ‹¤.
//dp[16][1<<16] : μ •μ μ κ°μλ” μµλ€ 16κ°.

int N, W[16][16], dp[16][65536]{ 0, };
int main() {
	scanf("%d", &N);
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) scanf("%d", &W[i][j]);
	}
	printf("%d", TSP(0, 1));
	//0λ²μ§Έ μ •μ μ„ μ‹μ‘ μ •μ μΌλ΅ μƒκ°ν•μ.
	//μ‹μ‘ μ •μ μΈ 0λ² μ •μ μ΄ λ°©λ¬ΈλμΌλ‹ 0λ²μ§Έ λΉ„νΈλ¥Ό 1λ΅ λ§λ“ λ‹¤.
}
```

---

```cpp
//μ•„λλ” μΌλ°μ μΈ DFSμ™€ μ μ‚¬ν•λ‹¤.
int TSP(int cur, int visited) {
	if (visited == (1 << N) - 1) {//(1 << N) - 1μ΄λ©΄ λ¨λ“  Nκ°μ μ •μ μ΄ λ°©λ¬Έλμ—λ‹¤λ” κ²ƒμ΄λ‹¤.
		if (W[cur][0]) return W[cur][0]; //μ΄ κ²½μ°, μ‹μ‘ μ •μ μΌλ΅ λμ•„κ°€λ” κ°„μ„ μ΄ μλ‹¤λ©΄ λ°ν™ν•κ³ 
		else return INF; //μ—†λ‹¤λ©΄ λ¬΄ν•λ€λ¥Ό λ°ν™ν•λ‹¤.
	}
	
  /*
		int retμ΄ μ•„λ‹λΌ int &retμ„ μ“°λ” μ΄μ λ”?
		μ—¬κΈ°μ„ λ³€κ²½λμ–΄μ•Ό ν•  κ°’μ€ dp[cur][visited]μ΄κΈ° λ•λ¬Έμ΄λ‹¤.
    μ‰½κ² λ§ν•΄ dp[cur][visited]λ¥Ό μΌμΌμ΄ μ“°μ§€ μ•κ³  retμΌλ΅ μ¤„μ—¬μ“°κΈ° μ„ν•¨μ΄λΌ μƒκ°ν•΄λ„ μΆ‹λ‹¤.
	*/
	int &ret = dp[cur][visited]; //ν„μ¬ μ •μ κΉμ§€, visitedμ μ •μ λ“¤μ„ κ±°μ³μ„ μ¨ μµμ†κ°’μ΄
	if (ret) return ret; //μλ‹¤λ©΄ κ·Έκ²ƒμ„ λ°ν™ν•κ³ ,
	
	ret = INF; //μ—†λ‹¤λ©΄ μ•„μ§ λ°©λ¬Έμ„ ν•μ§€ μ•μ€ κ²½μ°μ΄λ―€λ΅ λ¬΄ν•λ€λ¥Ό λ„£μ–΄μ¤€λ‹¤.

	for (int i = 0; i < N; i++) {//λ¨λ“  μ •μ λ“¤μ— λ€ν•΄
		if (!W[cur][i]) continue; //ν„μ¬ μ •μ μ—μ„ κ° μ μ—†λ” μ •μ μ΄κ±°λ‚
		if (visited & (1 << i)) continue; //μ΄λ―Έ λ°©λ¬Έν• μ •μ μ΄λΌλ©΄ ν¨μ¤ν•λ‹¤.
		ret = min(ret, TSP(i,visited|(1<<i)) + W[cur][i]);
	  //κ·Έλ ‡μ§€ μ•μΌλ©΄ ν•΄λ‹Ή μ •μ μΌλ΅ κ°€λ” κ°„μ„ μ„ λ”ν•λ©΄μ„ ν•΄λ‹Ή μ •μ μ— λ°©λ¬Έν•λ©΄μ„ μµμ†κ°’μ„ κ°±μ‹ ν•΄λ‚κ°„λ‹¤.
	}
	return ret;
}

```